var O=Object.defineProperty,N=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&w(e,n,t[n]);if(k)for(var n of k(t))V.call(t,n)&&w(e,n,t[n]);return e},g=(e,t)=>N(e,P(t));var C=(e,t,n)=>new Promise((m,p)=>{var c=a=>{try{o(n.next(a))}catch(u){p(u)}},l=a=>{try{o(n.throw(a))}catch(u){p(u)}},o=a=>a.done?m(a.value):Promise.resolve(a.value).then(c,l);o((n=n.apply(e,t)).next())});import{c as r,aG as q,b3 as T,ab as $,cJ as H,d as j,k as I,p as W,o as X,n as z,m as L,$ as x,M as F,bJ as J,ak as K,cK as Y,cL as G,cM as U,aB as Q,a1 as Z,Y as ee,N as te,O as ne,a7 as h,cy as oe,a8 as _}from"./index.bfc8a675.js";import{A as le}from"./index.fbe24a75.js";import{I as ae,a as se,j as ie}from"./index.e08e542c.js";import{u as re}from"./dynamic-table.68b23df4.js";import{g as ue}from"./hero.4400d3e6.js";import{u as ce}from"./useFormModal.f3651b8a.js";import"./index.ca46f111.js";import"./schema-form.c7aa7552.js";import"./index.0a5789cb.js";import"./VerticalRightOutlined.82a58a5b.js";function de(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const M=[{title:"\u5934\u50CF",align:"center",width:100,hideInSearch:!0,dataIndex:"avatar",bodyCell:({record:e})=>r(ae,{src:e.avatar,preview:{src:e.posters},key:e.avatar},null)},{title:"\u82F1\u96C4\u540D\u79F0",align:"center",dataIndex:"title"},{title:"\u82F1\u96C4\u79F0\u53F7",align:"center",dataIndex:"name"},{title:"\u5B9A\u4F4D",align:"center",dataIndex:"roles",bodyCell:({record:e})=>{var t;return r($,null,[(t=e.roles)==null?void 0:t.map(n=>r(q,{color:"blue",key:n},de(n)?n:{default:()=>[n]}))])}},{title:"\u64CD\u4F5C",align:"center",width:120,dataIndex:"$action",actions:({record:e})=>[{label:"\u67E5\u770B\u8BE6\u60C5",onClick:()=>H.push({name:"demos-table-lol-info",params:{id:e.heroId}})}]}];function me(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!T(e)}const E="context-menu",pe={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},A=e=>{const{item:t}=e;return r("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&r(K,{class:"mr-2",type:t.icon},null),r("span",null,[t.label])])};var xe=j({name:"ContextMenu",props:pe,setup(e){const t=I(null),n=I(!1),m=W(()=>{const{axis:l,items:o,styles:a,width:u}=e,{x:s,y:d}=l||{x:0,y:0},i=(o||[]).length*40,y=u,f=document.body,S=f.clientWidth<s+y?s-y:s,D=f.clientHeight<d+i?d-i:d;return g(v({},a),{position:"absolute",width:`${u}px`,left:`${S+1}px`,top:`${D+1}px`})});X(()=>{z(()=>n.value=!0)}),L(()=>{const l=x(t);l&&document.body.removeChild(l)});function p(l,o){const{handler:a,disabled:u}=l;u||(n.value=!1,o==null||o.stopPropagation(),o==null||o.preventDefault(),a==null||a())}function c(l){return l.map(o=>{const{disabled:a,label:u,children:s,divider:d=!1}=o,i={item:o,handler:p,showIcon:e.showIcon};return!s||s.length===0?r($,null,[r(F.Item,{disabled:a,class:`${E}__item`,key:u},{default:()=>[r(A,i,null)]}),d?r(J,{key:`d-${u}`},null):null]):x(n)?r(F.SubMenu,{key:u,disabled:a,popupClassName:`${E}__popup`},{title:()=>r(A,i,null),default:()=>c(s)}):null})}return()=>{let l;if(!x(n))return null;const{items:o}=e;return r("div",{class:E},[r(F,{inlineIndent:12,mode:"vertical",ref:t,style:x(m)},me(l=c(o))?l:{default:()=>[l]})])}}});const b={domList:[],resolve:()=>({})},fe=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!Y)return new Promise(n=>{const m=document.body,p=document.createElement("div"),c={};e.styles&&(c.styles=e.styles),e.items&&(c.items=e.items),e.event&&(c.customEvent=t,c.axis={x:t.clientX,y:t.clientY});const l=r(xe,c);G(l,p);const o=function(){b.resolve("")};b.domList.push(p);const a=function(){b.domList.forEach(u=>{try{u&&m.removeChild(u)}catch(s){console.error(s)}}),m.removeEventListener("click",o),m.removeEventListener("scroll",o)};b.resolve=function(u){a(),n(u)},a(),m.appendChild(p),m.addEventListener("click",o),m.addEventListener("scroll",o)})},B=function(){b&&(b.resolve(""),b.domList=[])};function he(e=!0){return U()&&e&&L(()=>{B()}),[fe,B]}const be=e=>[{field:"filename",component:"Input",label:e("component.excel.fileName"),rules:[{required:!0}]},{field:"bookType",component:"Select",label:e("component.excel.fileType"),defaultValue:"xlsx",rules:[{required:!0}],componentProps:{options:[{label:"xlsx",value:"xlsx",key:"xlsx"},{label:"html",value:"html",key:"html"},{label:"csv",value:"csv",key:"csv"},{label:"txt",value:"txt",key:"txt"}]}}],ye=()=>{const{t:e}=Q(),[t]=ce();return{openModal:({onOk:m})=>{t({modalProps:{title:e("component.excel.exportModalTitle"),onFinish:p=>C(void 0,null,function*(){const{filename:c,bookType:l}=p;m({filename:`${c.split(".").shift()}.${l}`,bookType:l})})},formProps:{labelWidth:100,schemas:be(e)}})}}},_e=_(" \u82F1\u96C4\u8054\u76DF -- \u6839\u636E\u6570\u7EC4\u683C\u5F0F\u7684\u6570\u636E\u8FDB\u884C\u5BFC\u51FA "),ve=_("\u8868\u683C\u81EA\u5E26\u5BFC\u51FA"),ge=_(" \u6570\u7EC4\u683C\u5F0F\u5BFC\u51FA "),Ce=_(" \u81EA\u5B9A\u4E49\u5BFC\u51FA\u683C\u5F0F "),Fe={name:"DemosTablesLolTable"},Se=j(g(v({},Fe),{setup(e){const[t]=re(),n=Z(),[m]=he(),p=ye();let c=[];const l=()=>{const s=M.filter(i=>i.dataIndex!=="$action"),d=s.map(i=>i.dataIndex);se({data:c.map(i=>d.reduce((y,f)=>(y[f]=Array.isArray(i[f])?i[f].toString():i[f],y),{})).map(i=>Object.values(i)),header:s.map(i=>i.title),filename:"\u4E8C\u7EF4\u6570\u7EC4\u65B9\u5F0F\u5BFC\u51FAexcel.xlsx"})},o=()=>{p.openModal({onOk:({filename:s,bookType:d})=>{ie({data:c,filename:s,write2excelOpts:{bookType:d}})}})},a=s=>C(this,null,function*(){const{data:d}=yield ue(s);return c=d.list,d}),u=s=>({onContextmenu:d=>{m({event:d,items:[{label:"\u67E5\u770B",handler:()=>{n.push({name:"demos-table-lol-info",params:{id:s.heroId}})}},{label:"\u7F16\u8F91",handler:()=>{}}]})}});return(s,d)=>{const i=ee("a-button");return te(),ne("div",null,[r(x(le),{message:"\u6E38\u620F\u4ECB\u7ECD",type:"info","show-icon":""},{description:h(()=>[_e]),_:1}),r(x(oe),{title:"\u82F1\u96C4\u5217\u8868mock\u6570\u636E",style:{"margin-top":"20px"}},{default:h(()=>[r(x(t),{size:"small",bordered:"","data-request":a,columns:x(M),"row-key":"heroid","export-file-name":"\u8868\u683C\u81EA\u5E26\u5BFC\u51FA","custom-row":u},{"export-button":h(()=>[r(i,{type:"primary"},{default:h(()=>[ve]),_:1})]),toolbar:h(()=>[r(i,{type:"primary",onClick:l},{default:h(()=>[ge]),_:1}),r(i,{type:"primary",onClick:o},{default:h(()=>[Ce]),_:1})]),_:1},8,["columns"])]),_:1})])}}}));export{Se as default};
