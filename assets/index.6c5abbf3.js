var v=(n,e,a)=>new Promise((i,l)=>{var c=t=>{try{d(a.next(t))}catch(s){l(s)}},_=t=>{try{d(a.throw(t))}catch(s){l(s)}},d=t=>t.done?i(t.value):Promise.resolve(t.value).then(c,_);d((a=a.apply(n,e)).next())});import{c as o,A as I,J as O,d as S,r as C,a0 as F,a1 as A,ap as B,Y as p,N as z,O as D,a7 as r,$ as h,b1 as U,aO as V,U as g,aa as k,V as E,W as L,a8 as N,b2 as P,ai as m,aQ as j}from"./index.bfc8a675.js";import{_ as M}from"./logo.d49f8590.js";var $={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},R=$;function y(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),i.forEach(function(l){T(n,l,a[l])})}return n}function T(n,e,a){return e in n?Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[e]=a,n}var b=function(e,a){var i=y({},e,a.attrs);return o(I,y({},i,{icon:R}),null)};b.displayName="SafetyOutlined";b.inheritAttrs=!1;var q=b;const J=n=>(E("data-v-27f7e92c"),n=n(),L(),n),Q={class:"login-box"},W=J(()=>g("div",{class:"login-logo"},[g("img",{src:M,width:"45"}),g("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antd Admin")],-1)),Y=["src"],G=N(" \u767B\u5F55 "),H=S({__name:"index",setup(n){const e=C({loading:!1,captcha:"",formInline:{username:"",password:"",verifyCode:"",captchaId:""}}),a=F(),i=A(),l=B(),c=()=>v(this,null,function*(){const{id:d,img:t}=yield P({width:100,height:50});e.captcha=t,e.formInline.captchaId=d});c();const _=()=>v(this,null,function*(){const{username:d,password:t,verifyCode:s}=e.formInline;if(d.trim()==""||t.trim()=="")return m.warning("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01");if(!s)return m.warning("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01");m.loading("\u767B\u5F55\u4E2D...",0),e.loading=!0,e.formInline;try{yield l.login(e.formInline).finally(()=>{e.loading=!1,m.destroy()}),m.success("\u767B\u5F55\u6210\u529F\uFF01"),setTimeout(()=>{var u;return i.replace((u=a.query.redirect)!=null?u:"/")})}catch(u){j.error({title:()=>"\u63D0\u793A",content:()=>u.message}),c()}});return(d,t)=>{const s=p("a-input"),u=p("a-form-item"),x=p("a-button"),w=p("a-form");return z(),D("div",Q,[W,o(w,{layout:"horizontal",model:e.formInline,onSubmit:k(_,["prevent"])},{default:r(()=>[o(u,null,{default:r(()=>[o(s,{value:e.formInline.username,"onUpdate:value":t[0]||(t[0]=f=>e.formInline.username=f),size:"large",placeholder:"rootadmin"},{prefix:r(()=>[o(h(U),{type:"user"})]),_:1},8,["value"])]),_:1}),o(u,null,{default:r(()=>[o(s,{value:e.formInline.password,"onUpdate:value":t[1]||(t[1]=f=>e.formInline.password=f),size:"large",type:"password",placeholder:"123456",autocomplete:"new-password"},{prefix:r(()=>[o(h(V),{type:"user"})]),_:1},8,["value"])]),_:1}),o(u,null,{default:r(()=>[o(s,{value:e.formInline.verifyCode,"onUpdate:value":t[2]||(t[2]=f=>e.formInline.verifyCode=f),placeholder:"\u9A8C\u8BC1\u7801",maxlength:4,size:"large"},{prefix:r(()=>[o(h(q))]),suffix:r(()=>[g("img",{src:e.captcha,class:"absolute right-0 h-full cursor-pointer",onClick:c},null,8,Y)]),_:1},8,["value"])]),_:1}),o(u,null,{default:r(()=>[o(x,{type:"primary","html-type":"submit",size:"large",loading:e.loading,block:""},{default:r(()=>[G]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","onSubmit"])])}}});var ee=O(H,[["__scopeId","data-v-27f7e92c"]]);export{ee as default};
